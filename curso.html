<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso Completo de Marketing Digital - Aulas</title>
    <link rel="stylesheet" href="style.css"> 
    
    <style>
        /* Estilos de Feedback Visual (Correta/Incorreta) */
        .questao .correta {
            background-color: #e6f6e6 !important; /* Verde suave */
            border: 1px solid #28a745 !important;
            color: #155724;
            font-weight: bold;
        }
        .questao .incorreta {
            background-color: #f8d7da !important; /* Vermelho suave */
            border: 1px solid #e63946 !important;
            color: #721c24;
            font-weight: bold;
        }

        /* Estilos para Modo Noturno */
        .dark-mode .questao .correta {
            background-color: #24482b !important;
            border: 1px solid #4caf50 !important;
            color: #c8e6c9;
        }
        .dark-mode .questao .incorreta {
            background-color: #58242a !important;
            border: 1px solid #e63946 !important;
            color: #f8d7da;
        }
        
        .btn-verificar-resposta {
            margin: 5px 0 20px 0;
            padding: 8px 15px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #007bff; /* Azul padr√£o */
            color: white;
            transition: background-color 0.3s;
        }
        .btn-verificar-resposta:hover:not(:disabled) {
            background-color: #0056b3;
        }
        .btn-verificar-resposta:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .teste-box .questao {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        /* Estilo para bot√µes do header */
        .btn-header {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.3s;
        }
        
        .btn-header.btn-inscricao {
            background-color: #28a745;
            color: white;
        }
        .btn-header.btn-inscricao:hover {
            background-color: #1e7e34;
        }

        .btn-header.btn-voltar-acesso {
            background-color: #6c757d; /* Cinza */
            color: white;
        }
        .btn-header.btn-voltar-acesso:hover {
            background-color: #5a6268;
        }

        .info-adicional {
             font-size: 0.8rem;
             margin-top: 10px;
        }
        .info-adicional span {
             display: block;
        }
    </style>
</head>
<body>
    <header>
        <button class="btn-header btn-voltar-topo" onclick="irParaAula(1)">‚Üê In√≠cio</button>
        <button class="btn-header btn-voltar-acesso" id="btnVoltarAcesso" onclick="voltarParaAcesso()" style="display: none;">Voltar para Acesso</button>
        
        <h1>Curso Completo de Marketing Digital</h1>
        <p id="headerInfo" style="font-size:0.9rem; margin-left:10px;">Aprenda a criar sua presen√ßa digital</p>
        
        <button class="btn-header btn-inscricao" id="btnCertInscricao" onclick="mostrarCertificadoInscricao()" style="display: none;">Ver Certificado de Inscri√ß√£o</button>
        <button class="btn-header btn-dark-mode" id="darkModeToggle" onclick="toggleDarkMode()">Modo Noturno üåô</button>
    </header>

    <div id="container">
        <aside id="sidebar" style="display: none;">
            <div class="modulo-title modulo-1">M√ìDULO 1: Fundamentos (B√°sico)</div>
            <div class="modulo-title modulo-2">M√ìDULO 2: Intermedi√°rio</div>
            <div class="modulo-title modulo-3">M√ìDULO 3: Avan√ßado</div>
        </aside>

        <main id="mainContent">
            <div id="telaInscricao" class="aula-content" style="max-width: 450px; margin: 50px auto; text-align: center; border: 1px solid var(--link-hover-bg); padding: 30px; border-radius: 8px;">
                <h2>Acesso e Inscri√ß√£o</h2>
                <p id="mensagemInscricao">Preencha seus dados para salvar seu progresso e acessar o certificado de inscri√ß√£o.</p>
                <form id="formInscricao" onsubmit="iniciarOuAcessar(event)">
                    <input type="text" id="alunoNome" placeholder="Seu Nome Completo" required 
                           style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid var(--muted); border-radius: 5px; font-size: 1rem;">
                    <input type="email" id="alunoEmail" placeholder="Seu Melhor E-mail (Identificador do Progresso)" required 
                           style="width: 100%; padding: 12px; margin: 10px 0 10px 0; border: 1px solid var(--muted); border-radius: 5px; font-size: 1rem;">
                    <input type="text" id="alunoCPF" placeholder="Seu CPF (Somente n√∫meros)" required 
                           pattern="[0-9]{11}" title="O CPF deve conter 11 d√≠gitos num√©ricos."
                           style="width: 100%; padding: 12px; margin: 10px 0 20px 0; border: 1px solid var(--muted); border-radius: 5px; font-size: 1rem;">
                    <button type="submit" class="btn" style="width: 100%;" id="btnAcessarCurso">Me Inscrever e Come√ßar o Curso</button>
                </form>
                <p style="margin-top: 15px; font-size: 0.9rem; color: var(--muted);">
                    Se voc√™ j√° se inscreveu, use o mesmo Nome, E-mail e CPF para continuar de onde parou.
                </p>
            </div>

            <div id="aulaConteudo" class="aula-content" style="display: none;">
                <h2>Bem-vindo ao Curso!</h2>
                <p>O conte√∫do ser√° carregado aqui.</p>
            </div>
            
            <div id="navBotoes" style="display: none;">
                <button id="btnAnterior" class="btn" onclick="irParaAulaAnterior()">Aula Anterior</button>
                <button id="btnProximo" class="btn" onclick="irParaProximaAula()">Pr√≥xima Aula</button>
            </div>
        </main>
    </div>


    <div id="certificadoInscricaoPopup" class="popup-bg" style="display: none;">
        <div class="certificado-inscricao" onclick="event.stopPropagation()">
            <button class="close-btn" onclick="fecharCertificadoInscricao()">X</button>
            <h2>CERTIFICADO DE INSCRI√á√ÉO</h2>
            <h1>Curso de Marketing Digital</h1>
            <p style="margin-top: 20px;">Este documento certifica a inscri√ß√£o de:</p>
            <h3 id="certificadoInscricaoNome">NOME DO ALUNO</h3>
            <p>E-mail: <span id="certificadoInscricaoEmail">EMAIL DO ALUNO</span></p>
            <p>CPF: <span id="certificadoInscricaoCPF">CPF DO ALUNO</span></p>
            <p style="margin-top: 10px;">no curso online de Marketing Digital, realizada em <span id="certificadoInscricaoData">Data</span>.</p>
            <p class="info-adicional">Matr√≠cula: <span id="certificadoInscricaoMatricula">NUMERO MATR√çCULA</span></p>
            <button class="btn" style="margin-top: 20px;" onclick="fecharCertificadoInscricao()">Ir para as Aulas</button>
        </div>
    </div>

    <div id="certificadoConclusaoPopup" class="popup-bg" style="display: none;">
        <div class="certificado-conclusao" onclick="event.stopPropagation()">
            <button class="close-btn" onclick="fecharCertificadoConclusao()">X</button>
            <div class="coroa">‚òÖ</div>
            <h2>CERTIFICADO DE CONCLUS√ÉO</h2>
            <h1>Marketing Digital</h1>
            <p class="texto-principal">Certificamos que</p>
            <h3 id="certificadoConclusaoNome">NOME DO ALUNO</h3>
            <p class="texto-principal">concluiu com √™xito o **Curso Completo de Marketing Digital**, com um total de 40 horas e</p>
            <p id="percentualAprovacao">aprova√ß√£o final com **0%** de acerto.</p>

            <div class="info-aluno">
                <span>E-mail: <span id="certificadoConclusaoEmail">EMAIL DO ALUNO</span></span>
                <span>CPF: <span id="certificadoConclusaoCPF">CPF DO ALUNO</span></span>
                <span>Matr√≠cula: <span id="certificadoConclusaoMatricula">NUMERO MATR√çCULA</span></span>
                <span>Data: <span id="certificadoConclusaoData">S√£o Paulo, 17 de Outubro de 2025</span></span>
            </div>

            <div class="assinaturas">
                <div class="assinatura-box">
                    <img src="assinatura_aluno.png" alt="Assinatura do Aluno">
                    <hr>
                    <p>Assinatura do Aluno</p>
                </div>
                <div class="assinatura-box">
                    <img src="assinatura_diretor.png" alt="Assinatura da Dire√ß√£o do Curso">
                    <hr>
                    <p>Dire√ß√£o do Curso</p>
                </div>
            </div>

            <div class="qrcode-area">
                QR Code<br>de<br>Valida√ß√£o
            </div>
            
            <button id="btnDownloadPDF" class="btn" style="margin-top: 30px;" onclick="downloadCertificadoPDF()">Baixar Certificado (PDF)</button>
        </div>
    </div>


    <script>
        // **********************************************
        // 1. DADOS DAS AULAS E CONTE√öDO (CONTE√öDO RESTAURADO)
        // **********************************************
        const aulas = {
            // M√ìDULO 1: FUNDAMENTOS
            1: { modulo: 1, titulo: "Aula 1 ‚Äî Introdu√ß√£o, objetivos, conceitos b√°sicos", 
                conteudo: `
                    <h2>Introdu√ß√£o, objetivos, conceitos b√°sicos</h2>
                    <p>Nesse m√≥dulo vamos aprender o que √© Marketing Digital, seus objetivos e conceitos principais.</p>
                    <p>O Marketing Digital √© a pr√°tica de divulgar produtos, servi√ßos ou ideias usando a internet e tecnologias digitais. Ele permite alcan√ßar pessoas de forma segmentada, ou seja, o p√∫blico certo, no momento certo, gastando menos recursos e conseguindo resultados que podem ser medidos com precis√£o. Diferente do marketing tradicional, ele permite intera√ß√£o direta com o p√∫blico, an√°lise em tempo real e ajustes r√°pidos em campanhas.</p>
                    <h3>Conceitos importantes:</h3>
                    <ul>
                        <li><strong>Marketing Digital:</strong> Conjunto de estrat√©gias que utilizam canais digitais para promover produtos ou servi√ßos.</li>
                        <li><strong>P√∫blico-alvo:</strong> Grupo de pessoas que possuem interesse no produto ou servi√ßo, definidas por caracter√≠sticas como idade, regi√£o, comportamento e interesses.</li>
                        <li><strong>Objetivos de uma campanha:</strong> Pode ser gerar vendas, captar contatos (leads), aumentar engajamento, fortalecer a marca ou educar o p√∫blico.</li>
                    </ul>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>Sempre defina objetivos claros antes de come√ßar qualquer campanha. Sem objetivo definido, fica dif√≠cil medir resultados.</li>
                        <li>Evite tentar atingir todos os p√∫blicos ao mesmo tempo; foque em quem tem mais chance de se interessar pelo seu produto.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma pequena padaria cria uma p√°gina no Instagram mostrando fotos de bolos e p√£es frescos, v√≠deos curtos do processo de produ√ß√£o e postagens de receitas. Ao postar diariamente, consegue atrair clientes pr√≥ximos e aumentar as vendas do dia a dia.</p>
                `
            },
            2: { modulo: 1, titulo: "Aula 2 ‚Äî Terminologias, hist√≥rico, import√¢ncia", 
                conteudo: `
                    <h2>Terminologias, hist√≥rico, import√¢ncia</h2>
                    <p>Nesse m√≥dulo vamos conhecer os termos mais usados no Marketing Digital, entender sua hist√≥ria e compreender sua import√¢ncia para neg√≥cios de qualquer tamanho.</p>
                    <h3>Terminologias b√°sicas:</h3>
                    <ul>
                        <li><strong>SEO (Search Engine Optimization):</strong> Conjunto de t√©cnicas que ajudam sites e conte√∫dos a aparecerem melhor em buscadores, como o Google.</li>
                        <li><strong>Lead:</strong> Pessoa que demonstra interesse em um produto ou servi√ßo e fornece algum contato, como e-mail ou telefone.</li>
                        <li><strong>Funil de vendas:</strong> Representa o caminho que o cliente percorre desde descobrir o produto at√© decidir pela compra.</li>
                        <li><strong>Landing Page:</strong> P√°gina criada com foco em convers√£o, geralmente para capturar leads ou vender produtos.</li>
                        <li><strong>Call to Action (CTA):</strong> Chamada para a√ß√£o, como ‚ÄúCompre agora‚Äù ou ‚ÄúCadastre-se‚Äù.</li>
                    </ul>
                    <h3>Hist√≥rico:</h3>
                    <p>O Marketing Digital come√ßou a se desenvolver com a populariza√ß√£o da internet nos anos 90. Inicialmente, empresas usavam sites simples e e-mails para divulga√ß√£o. Com o avan√ßo da tecnologia, surgiram redes sociais, an√∫ncios pagos, automa√ß√£o e an√°lise de dados, tornando o Marketing Digital uma ferramenta essencial para qualquer neg√≥cio moderno.</p>
                    <h3>Import√¢ncia:</h3>
                    <ul>
                        <li>Permite atingir um p√∫blico mais amplo de forma segmentada.</li>
                        <li>Reduz custos em compara√ß√£o com marketing tradicional.</li>
                        <li>Oferece m√©tricas precisas para medir desempenho.</li>
                        <li>Permite ajustar campanhas em tempo real.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma loja de roupas que publica posts no Facebook, cria artigos no blog com dicas de moda e usa SEO para ser encontrada no Google consegue atrair clientes sem precisar gastar muito em an√∫ncios pagos.</p>
                `
            },
            3: { modulo: 1, titulo: "Aula 3 ‚Äî Estruturas, exemplos, aplica√ß√µes", 
                conteudo: `
                    <h2>Estruturas, exemplos, aplica√ß√µes</h2>
                    <p>Nesse m√≥dulo vamos aprender sobre as estruturas de campanhas de Marketing Digital e como aplic√°-las de forma pr√°tica.</p>
                    <h3>Estruturas principais:</h3>
                    <ul>
                        <li><strong>Topo do Funil (ToFu):</strong> Conte√∫dos que atraem a aten√ß√£o do p√∫blico, geralmente educativos ou informativos.</li>
                        <li><strong>Meio do Funil (MoFu):</strong> Conte√∫dos que ajudam o cliente a considerar a compra, como compara√ß√µes, an√°lises e tutoriais.</li>
                        <li><strong>Fundo do Funil (BoFu):</strong> Conte√∫dos e ofertas que incentivam a compra, como descontos ou promo√ß√µes limitadas.</li>
                    </ul>
                    <h3>Dicas:</h3>
                    <ul>
                        <li>Sempre alinhe conte√∫do e estrat√©gia de funil com a persona (cliente ideal).</li>
                        <li>N√£o pule etapas do funil; cada fase √© importante para educar e preparar o cliente.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma empresa de cursos online cria v√≠deos gratuitos sobre dicas de estudo (topo), envia e-mails explicando comparativos entre cursos (meio) e oferece descontos especiais para matr√≠culas (fundo).</p>
                `
            },
            4: { modulo: 1, titulo: "Aula 4 ‚Äî Estrat√©gias, t√©cnicas, ferramentas", 
                conteudo: `
                    <h2>Estrat√©gias, t√©cnicas, ferramentas</h2>
                    <p>Nesse m√≥dulo vamos aprender estrat√©gias, t√©cnicas e ferramentas essenciais para criar campanhas digitais de sucesso.</p>
                    <h3>Estrat√©gias e t√©cnicas:</h3>
                    <ul>
                        <li><strong>Marketing de Conte√∫do:</strong> Criar posts, artigos, v√≠deos ou tutoriais que informam, ensinam ou divertem o p√∫blico.</li>
                        <li><strong>E-mail Marketing:</strong> Enviar mensagens personalizadas para leads e clientes com informa√ß√µes, ofertas ou novidades.</li>
                        <li><strong>Redes Sociais:</strong> Usar Instagram, Facebook, TikTok e YouTube para engajar o p√∫blico e fortalecer a marca.</li>
                        <li><strong>An√∫ncios pagos:</strong> Plataformas como Google Ads e Meta Ads permitem alcan√ßar pessoas segmentadas com publicidade direcionada.</li>
                    </ul>
                    <h3>Ferramentas √∫teis:</h3>
                    <ul>
                        <li><strong>Canva:</strong> Criar imagens, posts e apresenta√ß√µes visualmente atrativas.</li>
                        <li><strong>Mailchimp:</strong> Automatizar envio de e-mails e organizar listas de contatos.</li>
                        <li><strong>Google Analytics:</strong> Acompanhar m√©tricas e entender o comportamento do p√∫blico no site.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Um e-commerce cria posts no Instagram, envia e-mails com promo√ß√µes e analisa resultados pelo Google Analytics para descobrir quais a√ß√µes geram mais vendas.</p>
                `
            },
            5: { modulo: 1, titulo: "Aula 5 ‚Äî Revis√£o, casos pr√°ticos, dicas", 
                conteudo: `
                    <h2>Revis√£o, casos pr√°ticos, dicas</h2>
                    <p>Nesse m√≥dulo vamos revisar todo o conte√∫do do M√≥dulo 1 e refor√ßar os pontos mais importantes.</p>
                    <h3>Resumo das aulas:</h3>
                    <ul>
                        <li>Marketing Digital √© a promo√ß√£o online de produtos e servi√ßos.</li>
                        <li>Conhecer termos como SEO, funil de vendas, persona e lead √© essencial.</li>
                        <li>Estruturar o funil ajuda a organizar estrat√©gias.</li>
                        <li>Redes sociais, e-mail e an√∫ncios pagos s√£o os principais canais de atua√ß√£o.</li>
                    </ul>
                    <h3>Dicas pr√°ticas:</h3>
                    <ul>
                        <li>Planejar antes de criar qualquer conte√∫do.</li>
                        <li>Medir e analisar resultados constantemente.</li>
                        <li>Produzir conte√∫do que seja √∫til ou divertido para o p√∫blico.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma empresa organiza posts semanais, envia e-mails segmentados e acompanha m√©tricas para entender o que funciona e melhorar resultados.</p>
                    <p>Quando estiver pronto, clique no bot√£o abaixo para ir para o Teste Final do M√≥dulo 1.</p>
                `
            },
            6: { modulo: 1, titulo: "Teste do M√≥dulo 1 ‚Äì Fundamentos", 
                isTeste: true,
                conteudo: `
                    <div class="teste-box" id="testeM1">
                        <h2>Teste Final - M√≥dulo 1</h2>
                        <p>Responda √†s 10 perguntas abaixo. Voc√™ precisa de 6 acertos para aprova√ß√£o.</p>
                        
                        <div class="questao" data-questao="1">
                            <h3>1. Explique o que √© Marketing Digital e como ele difere do marketing tradicional.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q1" value="correta"> A) Estrat√©gia online que permite medir resultados e ajustar campanhas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q1" value="errada"> B) Apenas postar nas redes sociais sem planejamento.</label>
                            <label class="resposta-opcao"><input type="radio" name="q1" value="errada"> C) Marketing offline adaptado para internet.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(1)">Verificar Resposta</button>
                        </div>
                        
                        <div class="questao" data-questao="2">
                            <h3>2. Defina ‚Äúp√∫blico-alvo‚Äù e explique sua import√¢ncia em uma campanha.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q2" value="correta"> A) Grupo de pessoas interessadas no produto ou servi√ßo.</label>
                            <label class="resposta-opcao"><input type="radio" name="q2" value="errada"> B) Qualquer pessoa que veja a campanha.</label>
                            <label class="resposta-opcao"><input type="radio" name="q2" value="errada"> C) Apenas clientes antigos.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(2)">Verificar Resposta</button>
                        </div>
                        
                        <div class="questao" data-questao="3">
                            <h3>3. Explique a fun√ß√£o do SEO em campanhas digitais.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q3" value="correta"> A) Melhorar a posi√ß√£o de sites e conte√∫dos nos buscadores.</label>
                            <label class="resposta-opcao"><input type="radio" name="q3" value="errada"> B) Criar an√∫ncios pagos em redes sociais.</label>
                            <label class="resposta-opcao"><input type="radio" name="q3" value="errada"> C) Medir resultados de vendas.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(3)">Verificar Resposta</button>
                        </div>
                        
                        <div class="questao" data-questao="4">
                            <h3>4. Descreva o funil de vendas e suas etapas.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q4" value="correta"> A) Caminho do cliente da descoberta √† compra: topo, meio e fundo.</label>
                            <label class="resposta-opcao"><input type="radio" name="q4" value="errada"> B) Lista de produtos da empresa.</label>
                            <label class="resposta-opcao"><input type="radio" name="q4" value="errada"> C) Sequ√™ncia de an√∫ncios pagos sem planejamento.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(4)">Verificar Resposta</button>
                        </div>
                        
                        <div class="questao" data-questao="5">
                            <h3>5. Qual a fun√ß√£o do marketing de conte√∫do?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q5" value="correta"> A) Atrair, informar e engajar o p√∫blico de forma natural.</label>
                            <label class="resposta-opcao"><input type="radio" name="q5" value="errada"> B) Criar textos longos sem foco em resultados.</label>
                            <label class="resposta-opcao"><input type="radio" name="q5" value="errada"> C) Substituir an√∫ncios pagos.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(5)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="6">
                            <h3>6. Explique como o e-mail marketing contribui para campanhas.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q6" value="correta"> A) Comunica√ß√£o direta, personalizando mensagens e ofertas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q6" value="errada"> B) Envio gen√©rico de mensagens.</label>
                            <label class="resposta-opcao"><input type="radio" name="q6" value="errada"> C) Criar boletins sem objetivo comercial.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(6)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="7">
                            <h3>7. Qual a import√¢ncia das redes sociais no Marketing Digital?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q7" value="correta"> A) Engajar clientes e fortalecer a marca.</label>
                            <label class="resposta-opcao"><input type="radio" name="q7" value="errada"> B) Apenas exibir produtos sem intera√ß√£o.</label>
                            <label class="resposta-opcao"><input type="radio" name="q7" value="errada"> C) Substituir sites e blogs.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(7)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="8">
                            <h3>8. Cite ferramentas que ajudam a criar campanhas eficientes.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q8" value="correta"> A) Canva, Mailchimp, Google Analytics, Ads.</label>
                            <label class="resposta-opcao"><input type="radio" name="q8" value="errada"> B) Apenas planilhas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q8" value="errada"> C) Software de edi√ß√£o de v√≠deo sem an√°lise.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(8)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="9">
                            <h3>9. Como um pequeno neg√≥cio aplica Marketing Digital com baixo or√ßamento?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q9" value="correta"> A) Conte√∫do gratuito, redes sociais e monitoramento de m√©tricas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q9" value="errada"> B) Comprar an√∫ncios pagos sem planejamento.</label>
                            <label class="resposta-opcao"><input type="radio" name="q9" value="errada"> C) Esperar que clientes encontrem a empresa.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(9)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="10">
                            <h3>10. Por que analisar m√©tricas √© essencial?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q10" value="correta"> A) Melhorar resultados e tomar decis√µes estrat√©gicas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q10" value="errada"> B) Apenas preencher relat√≥rios.</label>
                            <label class="resposta-opcao"><input type="radio" name="q10" value="errada"> C) N√£o √© necess√°rio se a campanha estiver online.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(10)">Verificar Resposta</button>
                        </div>

                        <button id="btnFinalizarTesteM1" class="btn" onclick="finalizarTeste(1, 10, 6)" disabled>Finalizar Teste</button>
                    </div>
                `
            },

            // M√ìDULO 2: INTERMEDI√ÅRIO
            7: { modulo: 2, titulo: "Aula 1 ‚Äî Conceitos avan√ßados, aprofundamento", 
                conteudo: `
                    <h2>Conceitos avan√ßados, aprofundamento</h2>
                    <p>Nesse m√≥dulo vamos aprender conceitos mais avan√ßados do Marketing Digital, aprofundando a compreens√£o de segmenta√ß√£o de p√∫blico, funis detalhados e indicadores de desempenho (KPIs).</p>
                    <h3>Segmenta√ß√£o de p√∫blico:</h3>
                    <p>Segmentar significa dividir o p√∫blico em grupos menores com caracter√≠sticas semelhantes (idade, interesses, localiza√ß√£o, comportamento online). Isso ajuda a criar mensagens mais relevantes.</p>
                    <h3>Persona:</h3>
                    <p>Persona √© a representa√ß√£o do cliente ideal, detalhando idade, h√°bitos, interesses e necessidades. Diferente do p√∫blico-alvo, que √© mais gen√©rico, a persona permite criar campanhas muito mais personalizadas.</p>
                    <h3>Jornada do cliente:</h3>
                    <p>A jornada do cliente representa as etapas que ele percorre at√© realizar a compra: conscientiza√ß√£o, considera√ß√£o e decis√£o. Entender essa jornada permite entregar o conte√∫do certo no momento certo.</p>
                    <h3>KPIs (Key Performance Indicators):</h3>
                    <p>Indicadores de desempenho medem se os objetivos da campanha est√£o sendo alcan√ßados. Exemplos: taxa de convers√£o, alcance de publica√ß√µes, cliques em links, taxa de abertura de e-mails.</p>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma loja de cal√ßados cria tr√™s personas: jovens que compram t√™nis, adultos que compram sapatos sociais e idosos que compram cal√ßados confort√°veis. Para cada grupo, a loja envia campanhas personalizadas, aumentando as chances de venda.</p>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>N√£o confundir p√∫blico-alvo com persona; persona √© muito mais detalhada.</li>
                        <li>Sempre acompanhar KPIs para tomar decis√µes informadas.</li>
                    </ul>
                `
            },
            8: { modulo: 2, titulo: "Aula 2 ‚Äî M√©todos, procedimentos, exemplos", 
                conteudo: `
                    <h2>M√©todos, procedimentos, exemplos</h2>
                    <p>Nesse m√≥dulo vamos aprender m√©todos para planejar, executar e avaliar campanhas intermedi√°rias.</p>
                    <h3>Passo a passo de planejamento:</h3>
                    <ul>
                        <li><strong>Definir p√∫blico e objetivos:</strong> Saiba exatamente quem deseja atingir e qual a√ß√£o quer gerar (venda, cadastro, engajamento).</li>
                        <li><strong>Escolher canais:</strong> Redes sociais, blog, e-mail ou an√∫ncios pagos, conforme comportamento da persona.</li>
                        <li><strong>Criar conte√∫do adequado:</strong> Informativo, educativo ou promocional, conforme etapa do funil.</li>
                        <li><strong>Integrar canais:</strong> Certifique-se de que redes sociais, blog e e-mail funcionem juntos, refor√ßando a mensagem.</li>
                        <li><strong>Mensurar resultados:</strong> Analise KPIs para entender desempenho e ajustar estrat√©gias.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma escola online segmenta alunos por idade e interesse: envia posts educativos no Instagram para jovens, e-mails com dicas de estudo para adultos, e usa an√∫ncios pagos segmentados para aumentar matr√≠culas.</p>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>Evite criar conte√∫do gen√©rico que n√£o atenda a persona.</li>
                        <li>Integra√ß√£o de canais aumenta efici√™ncia e engajamento.</li>
                    </ul>
                `
            },
            9: { modulo: 2, titulo: "Aula 3 ‚Äî Exerc√≠cios pr√°ticos, resolu√ß√£o de problemas", 
                conteudo: `
                    <h2>Exerc√≠cios pr√°ticos, resolu√ß√£o de problemas</h2>
                    <p>Nesse m√≥dulo vamos praticar a cria√ß√£o de funis intermedi√°rios e resolver problemas comuns.</p>
                    <h3>Exerc√≠cios sugeridos:</h3>
                    <ul>
                        <li>Criar um funil completo para um neg√≥cio fict√≠cio, incluindo topo, meio e fundo.</li>
                        <li>Simular m√©tricas (visualiza√ß√µes, cliques, convers√µes) e identificar pontos fracos.</li>
                        <li>Propor ajustes para aumentar a convers√£o, como mudar oferta, ajustar texto ou imagem.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma loja percebe que muitos clientes visitam o site, mas n√£o compram. Ao analisar m√©tricas, descobre que a p√°gina de checkout √© confusa. A solu√ß√£o: melhorar layout, incluir bot√£o claro de compra e enviar e-mail de lembrete, aumentando as vendas.</p>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>Sempre simule m√©tricas antes de executar campanhas reais.</li>
                        <li>Pequenos ajustes no funil podem gerar grandes resultados.</li>
                    </ul>
                `
            },
            10: { modulo: 2, titulo: "Aula 4 ‚Äî Integra√ß√£o, an√°lise, interpreta√ß√£o", 
                conteudo: `
                    <h2>Integra√ß√£o, an√°lise, interpreta√ß√£o</h2>
                    <p>Nesse m√≥dulo vamos aprender a integrar canais e interpretar dados de campanhas.</p>
                    <h3>Integra√ß√£o de canais:</h3>
                    <p>Significa usar redes sociais, e-mail, blog e an√∫ncios pagos de forma conjunta para refor√ßar a mensagem. Por exemplo, o mesmo conte√∫do pode ser adaptado em post de Instagram, artigo de blog e e-mail, criando consist√™ncia.</p>
                    <h3>Interpreta√ß√£o de dados:</h3>
                    <p>Analisar m√©tricas como taxa de abertura de e-mails, cliques em links e convers√£o ajuda a entender o comportamento do p√∫blico e ajustar a campanha.</p>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Um cliente v√™ post no Instagram, l√™ artigo no blog, e recebe e-mail com oferta personalizada. A empresa analisa m√©tricas em cada ponto para identificar onde o p√∫blico perde interesse e otimiza a comunica√ß√£o.</p>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>N√£o se limite a olhar m√©tricas isoladas; veja o caminho completo do cliente.</li>
                        <li>Ajuste campanhas com base em dados reais, n√£o em suposi√ß√µes.</li>
                    </ul>
                `
            },
            11: { modulo: 2, titulo: "Aula 5 ‚Äî Revis√£o, melhores pr√°ticas, desafios", 
                conteudo: `
                    <h2>Revis√£o, melhores pr√°ticas, desafios</h2>
                    <p>Nesse m√≥dulo vamos revisar todo o conte√∫do do M√≥dulo 2 e consolidar aprendizados.</p>
                    <h3>Resumo:</h3>
                    <ul>
                        <li>Persona detalhada e segmenta√ß√£o avan√ßada.</li>
                        <li>Funis intermedi√°rios e integra√ß√£o de canais.</li>
                        <li>Interpreta√ß√£o de KPIs e ajustes estrat√©gicos.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Cria√ß√£o de campanha completa: Instagram + blog + e-mail, segmentando por idade e interesse, medindo m√©tricas e ajustando para aumentar convers√£o.</p>
                    <h3>Dicas finais:</h3>
                    <ul>
                        <li>Sempre planejar antes de executar campanhas.</li>
                        <li>Testar diferentes abordagens e analisar resultados.</li>
                        <li>Aprender com erros e ajustar estrat√©gias constantemente.</li>
                    </ul>
                    <p>Quando estiver pronto, clique no bot√£o abaixo para ir para o Teste Final do M√≥dulo 2.</p>
                `
            },
            12: { modulo: 2, titulo: "Teste do M√≥dulo 2 ‚Äì Intermedi√°rio", 
                isTeste: true,
                conteudo: `
                    <div class="teste-box" id="testeM2" style="--teste-border-light: #b2dfdb;">
                        <h2>Teste Final - M√≥dulo 2</h2>
                        <p>Responda √†s 10 perguntas abaixo. Voc√™ precisa de 6 acertos para aprova√ß√£o.</p>

                        <div class="questao" data-questao="11">
                            <h3>1. Explique a import√¢ncia de criar personas detalhadas.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q11" value="correta"> A) Para segmentar melhor e personalizar mensagens.</label>
                            <label class="resposta-opcao"><input type="radio" name="q11" value="errada"> B) Para preencher planilhas de clientes.</label>
                            <label class="resposta-opcao"><input type="radio" name="q11" value="errada"> C) Para enviar a mesma oferta a todos.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(11)">Verificar Resposta</button>
                        </div>
                        
                        <div class="questao" data-questao="12">
                            <h3>2. O que √© a jornada do cliente e por que √© importante?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q12" value="correta"> A) Caminho do interesse √† compra, ajudando a entregar conte√∫do correto.</label>
                            <label class="resposta-opcao"><input type="radio" name="q12" value="errada"> B) Lista de produtos vendidos.</label>
                            <label class="resposta-opcao"><input type="radio" name="q12" value="errada"> C) Sequ√™ncia de e-mails autom√°ticos sem estrat√©gia.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(12)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="13">
                            <h3>3. Como integrar canais melhora a experi√™ncia do cliente?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q13" value="correta"> A) Cria experi√™ncia consistente e aumenta engajamento.</label>
                            <label class="resposta-opcao"><input type="radio" name="q13" value="errada"> B) Apenas repete conte√∫do sem foco.</label>
                            <label class="resposta-opcao"><input type="radio" name="q13" value="errada"> C) N√£o tem efeito se canais forem usados isoladamente.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(13)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="14">
                            <h3>4. Explique a fun√ß√£o dos KPIs.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q14" value="correta"> A) Medir desempenho e orientar decis√µes estrat√©gicas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q14" value="errada"> B) Apenas gerar relat√≥rios.</label>
                            <label class="resposta-opcao"><input type="radio" name="q14" value="errada"> C) Contar vendas sem detalhar funil.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(14)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="15">
                            <h3>5. Como resolver problemas de baixa convers√£o no meio do funil?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q15" value="correta"> A) Analisar m√©tricas e ajustar conte√∫do ou oferta.</label>
                            <label class="resposta-opcao"><input type="radio" name="q15" value="errada"> B) Aumentar or√ßamento sem mudar estrat√©gia.</label>
                            <label class="resposta-opcao"><input type="radio" name="q15" value="errada"> C) Ignorar e esperar que leads comprem.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(15)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="16">
                            <h3>6. Explique como criar um funil intermedi√°rio eficiente.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q16" value="correta"> A) Conte√∫dos educativos (topo), comparativos (meio) e ofertas (fundo).</label>
                            <label class="resposta-opcao"><input type="radio" name="q16" value="errada"> B) Apenas posts isolados.</label>
                            <label class="resposta-opcao"><input type="radio" name="q16" value="errada"> C) E-mails de venda sem sequ√™ncia.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(16)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="17">
                            <h3>7. Por que testar diferentes abordagens √© importante?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q17" value="correta"> A) Descobrir o que funciona melhor e melhorar resultados.</label>
                            <label class="resposta-opcao"><input type="radio" name="q17" value="errada"> B) Manter tudo igual.</label>
                            <label class="resposta-opcao"><input type="radio" name="q17" value="errada"> C) Apenas perder tempo.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(17)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="18">
                            <h3>8. Qual o papel da an√°lise na otimiza√ß√£o de campanhas?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q18" value="correta"> A) Identificar falhas e ajustar estrat√©gias.</label>
                            <label class="resposta-opcao"><input type="radio" name="q18" value="errada"> B) Comprovar resultados positivos apenas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q18" value="errada"> C) N√£o influencia na estrat√©gia.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(18)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="19">
                            <h3>9. O que significa "conte√∫do personalizado" no Marketing Digital?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q19" value="correta"> A) Conte√∫do relevante e direcionado √† persona.</label>
                            <label class="resposta-opcao"><input type="radio" name="q19" value="errada"> B) Conte√∫do com o nome do cliente apenas.</label>
                            <label class="resposta-opcao"><input type="radio" name="q19" value="errada"> C) Conte√∫do igual para todos os p√∫blicos.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(19)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="20">
                            <h3>10. Por que a integra√ß√£o de canais √© uma "melhor pr√°tica"?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q20" value="correta"> A) Refor√ßa a mensagem e cria consist√™ncia na marca.</label>
                            <label class="resposta-opcao"><input type="radio" name="q20" value="errada"> B) Aumenta o custo sem retorno.</label>
                            <label class="resposta-opcao"><input type="radio" name="q20" value="errada"> C) N√£o √© relevante para pequenos neg√≥cios.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(20)">Verificar Resposta</button>
                        </div>

                        <button id="btnFinalizarTesteM2" class="btn" onclick="finalizarTeste(2, 20, 16)" disabled>Finalizar Teste</button>
                    </div>
                `
            },
            
            // M√ìDULO 3: AVAN√áADO
            13: { modulo: 3, titulo: "Aula 1 ‚Äî Otimiza√ß√£o, testes A/B, escalabilidade", 
                conteudo: `
                    <h2 style="color: var(--module3-color);">Otimiza√ß√£o, testes A/B, escalabilidade</h2>
                    <p>Nesse m√≥dulo vamos explorar as estrat√©gias avan√ßadas para otimizar campanhas, realizar testes A/B e planejar a escalabilidade.</p>
                    <h3>Otimiza√ß√£o de Convers√£o (CRO - Conversion Rate Optimization):</h3>
                    <p>CRO √© o processo de aumentar a porcentagem de visitantes que realizam uma a√ß√£o desejada (compra, cadastro). Envolve ajustar elementos da p√°gina (t√≠tulos, CTAs, layout) com base em dados para melhorar o desempenho.</p>
                    <h3>Testes A/B:</h3>
                    <p>Os testes A/B consistem em criar duas vers√µes de uma p√°gina, e-mail ou an√∫ncio (A e B), e envi√°-las a dois grupos de p√∫blico. A vers√£o que tiver o melhor resultado (maior convers√£o) √© escolhida para ser usada na campanha principal.</p>
                    <h3>Escalabilidade:</h3>
                    <p>Escalabilidade √© a capacidade de um neg√≥cio crescer e aumentar a produ√ß√£o ou o n√∫mero de clientes sem que os custos aumentem na mesma propor√ß√£o. No Marketing Digital, significa ter campanhas que podem receber mais investimento e gerar mais lucro.</p>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma empresa testa duas chamadas para a√ß√£o diferentes em sua Landing Page (Teste A/B). A vers√£o A usa "Baixe Agora Gr√°tis" e a vers√£o B usa "Quero Meu Guia Completo". Ap√≥s a an√°lise, a vers√£o B gera 20% mais cadastros, ent√£o a empresa adota a vers√£o B e investe mais em tr√°fego (escalabilidade).</p>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>Teste apenas uma vari√°vel por vez em um Teste A/B para saber o que realmente causou a diferen√ßa no resultado.</li>
                        <li>Escalar a campanha antes da otimiza√ß√£o pode desperdi√ßar recursos.</li>
                    </ul>
                `
            },
            14: { modulo: 3, titulo: "Aula 2 ‚Äî Automa√ß√£o, Big Data, Machine Learning", 
                conteudo: `
                    <h2 style="color: var(--module3-color);">Automa√ß√£o, Big Data, Machine Learning</h2>
                    <p>Nesse m√≥dulo vamos abordar a automa√ß√£o de marketing e o uso de tecnologias avan√ßadas para otimizar campanhas.</p>
                    <h3>Automa√ß√£o de Marketing:</h3>
                    <p>A automa√ß√£o permite automatizar tarefas repetitivas como envio de e-mails, postagens em redes sociais e segmenta√ß√£o de leads. Isso aumenta a efici√™ncia e permite que o profissional de marketing se concentre em tarefas mais estrat√©gicas.</p>
                    <h3>Big Data e An√°lise de Dados:</h3>
                    <p>Big Data √© um grande volume de dados que, quando analisado, revela padr√µes e tend√™ncias de consumo. O uso de Big Data permite prever o comportamento do cliente e personalizar a comunica√ß√£o em um n√≠vel muito mais profundo.</p>
                    <h3>Machine Learning (Aprendizado de M√°quina):</h3>
                    <p>O Machine Learning √© usado em plataformas de an√∫ncios (Google Ads, Meta Ads) para otimizar automaticamente o desempenho das campanhas, encontrando o p√∫blico mais propenso a converter no menor custo poss√≠vel.</p>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Um sistema de e-mail marketing envia automaticamente uma s√©rie de 5 e-mails para um cliente que abandonou o carrinho de compras (automa√ß√£o), e a plataforma de an√∫ncios ajusta lances e p√∫blico-alvo em tempo real para maximizar o retorno do investimento (Machine Learning).</p>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>Ferramentas de automa√ß√£o exigem planejamento cuidadoso para n√£o enviar mensagens irrelevantes.</li>
                        <li>O Big Data s√≥ √© √∫til se for analisado e transformado em a√ß√µes pr√°ticas.</li>
                    </ul>
                `
            },
            15: { modulo: 3, titulo: "Aula 3 ‚Äî Seguran√ßa, √©tica, tend√™ncias futuras", 
                conteudo: `
                    <h2 style="color: var(--module3-color);">Seguran√ßa, √©tica, tend√™ncias futuras</h2>
                    <p>Nesse m√≥dulo vamos discutir a import√¢ncia da seguran√ßa de dados, a √©tica no Marketing Digital e as tend√™ncias do futuro.</p>
                    <h3>LGPD e Privacidade:</h3>
                    <p>A Lei Geral de Prote√ß√£o de Dados (LGPD) no Brasil e outras regulamenta√ß√µes globais exigem que empresas protejam os dados pessoais dos clientes, obtenham consentimento e garantam transpar√™ncia no uso dessas informa√ß√µes. A √©tica √© fundamental para construir confian√ßa.</p>
                    <h3>Tend√™ncias Futuras:</h3>
                    <ul>
                        <li><strong>Metaverso e Realidade Aumentada:</strong> Uso de ambientes virtuais para interagir com a marca e experimentar produtos.</li>
                        <li><strong>Marketing de Voz:</strong> Otimiza√ß√£o para assistentes de voz (Alexa, Google Assistant) e busca por voz.</li>
                        <li><strong>Intelig√™ncia Artificial Generativa:</strong> Uso de I.A. para criar conte√∫do (textos, imagens) em larga escala.</li>
                    </ul>
                    <h3>Exemplo pr√°tico:</h3>
                    <p>Uma loja online atualiza sua pol√≠tica de privacidade para estar em conformidade com a LGPD, solicitando o consentimento expl√≠cito dos clientes para o uso de seus dados (√©tica e seguran√ßa). Ao mesmo tempo, come√ßa a testar um filtro de Realidade Aumentada no Instagram para que os clientes "experimentem" roupas (tend√™ncia futura).</p>
                    <h3>Dicas e alertas:</h3>
                    <ul>
                        <li>Priorize a seguran√ßa e a √©tica; a confian√ßa do cliente √© o ativo mais valioso.</li>
                        <li>Fique atento √†s novas tecnologias, como I.A. e Metaverso, para manter a relev√¢ncia.</li>
                    </ul>
                `
            },
            16: { modulo: 3, titulo: "Aula 4 ‚Äî Revis√£o Geral e Conclus√£o do Curso", 
                conteudo: `
                    <h2 style="color: var(--module3-color);">Revis√£o Geral e Conclus√£o do Curso</h2>
                    <p>Parab√©ns! Voc√™ chegou ao final do conte√∫do program√°tico. Aqui est√° uma revis√£o dos principais pontos abordados:</p>
                    <ul>
                        <li><strong>M√≥dulo 1:</strong> Fundamentos (SEO, Funil, Conte√∫do).</li>
                        <li><strong>M√≥dulo 2:</strong> Estrat√©gias (Persona, KPIs, Integra√ß√£o de Canais).</li>
                        <li><strong>M√≥dulo 3:</strong> Avan√ßado (Testes A/B, Automa√ß√£o, √âtica e Tend√™ncias).</li>
                    </ul>
                    <p>O Marketing Digital √© uma √°rea de constante aprendizado. Continue praticando, analisando seus resultados e adaptando-se √†s mudan√ßas do mercado.</p>
                    <p>Agora voc√™ est√° pronto(a) para o √∫ltimo teste e para emitir seu Certificado de Conclus√£o.</p>
                    <p>Quando estiver pronto, clique no bot√£o abaixo para ir para o Teste Final do M√≥dulo 3.</p>
                `
            },
            17: { modulo: 3, titulo: "Teste do M√≥dulo 3 ‚Äì Avan√ßado", 
                isTeste: true,
                conteudo: `
                    <div class="teste-box" id="testeM3" style="--teste-border-light: #b2dfdb;">
                        <h2 style="color: var(--module3-color);">Teste Final - M√≥dulo 3</h2>
                        <p>Responda √†s 10 perguntas abaixo. Voc√™ precisa de 6 acertos para aprova√ß√£o.</p>
                        
                        <div class="questao" data-questao="21">
                            <h3>1. Explique o conceito de CRO (Conversion Rate Optimization).</h3>
                            <label class="resposta-opcao"><input type="radio" name="q21" value="correta"> A) Aumentar a porcentagem de visitantes que realizam uma a√ß√£o desejada.</label>
                            <label class="resposta-opcao"><input type="radio" name="q21" value="errada"> B) Diminuir o custo por clique.</label>
                            <label class="resposta-opcao"><input type="radio" name="q21" value="errada"> C) Criar mais conte√∫do.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(21)">Verificar Resposta</button>
                        </div>
                        
                        <div class="questao" data-questao="22">
                            <h3>2. Qual a regra fundamental ao realizar um Teste A/B?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q22" value="correta"> A) Testar apenas uma vari√°vel por vez.</label>
                            <label class="resposta-opcao"><input type="radio" name="q22" value="errada"> B) Testar todas as vari√°veis simultaneamente.</label>
                            <label class="resposta-opcao"><input type="radio" name="q22" value="errada"> C) Apenas testar t√≠tulos.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(22)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="23">
                            <h3>3. O que √© escalabilidade no contexto do Marketing Digital?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q23" value="correta"> A) Crescer o neg√≥cio com aumento de custo n√£o proporcional.</label>
                            <label class="resposta-opcao"><input type="radio" name="q23" value="errada"> B) Aumentar apenas o volume de e-mails.</label>
                            <label class="resposta-opcao"><input type="radio" name="q23" value="errada"> C) Manter o mesmo n√≠vel de custo e receita.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(23)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="24">
                            <h3>4. Explique a fun√ß√£o da Automa√ß√£o de Marketing.</h3>
                            <label class="resposta-opcao"><input type="radio" name="q24" value="correta"> A) Automatizar tarefas repetitivas, liberando tempo para estrat√©gia.</label>
                            <label class="resposta-opcao"><input type="radio" name="q24" value="errada"> B) Substituir totalmente o trabalho humano.</label>
                            <label class="resposta-opcao"><input type="radio" name="q24" value="errada"> C) Aumentar o custo de m√£o de obra.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(24)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="25">
                            <h3>5. Como o Machine Learning otimiza campanhas de an√∫ncios?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q25" value="correta"> A) Ajusta lances e p√∫blico-alvo em tempo real para maximizar o ROI.</label>
                            <label class="resposta-opcao"><input type="radio" name="q25" value="errada"> B) Cria imagens para posts sem otimizar a distribui√ß√£o.</label>
                            <label class="resposta-opcao"><input type="radio" name="q25" value="errada"> C) Apenas reporta os erros da campanha.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(25)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="26">
                            <h3>6. Qual a relev√¢ncia da LGPD para o Marketing Digital?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q26" value="correta"> A) Exige prote√ß√£o de dados, consentimento e transpar√™ncia.</label>
                            <label class="resposta-opcao"><input type="radio" name="q26" value="errada"> B) Permite o uso de dados sem consentimento expl√≠cito.</label>
                            <label class="resposta-opcao"><input type="radio" name="q26" value="errada"> C) N√£o se aplica a campanhas online.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(26)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="27">
                            <h3>7. O que s√£o tend√™ncias como Metaverso e Realidade Aumentada?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q27" value="correta"> A) Novas formas de intera√ß√£o e experimenta√ß√£o de produtos digitais.</label>
                            <label class="resposta-opcao"><input type="radio" name="q27" value="errada"> B) Tecnologias limitadas a jogos.</label>
                            <label class="resposta-opcao"><input type="radio" name="q27" value="errada"> C) Conceitos que n√£o afetam o Marketing Digital.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(27)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="28">
                            <h3>8. Qual a import√¢ncia da √©tica no uso de Big Data?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q28" value="correta"> A) Construir confian√ßa e garantir a privacidade dos clientes.</label>
                            <label class="resposta-opcao"><input type="radio" name="q28" value="errada"> B) Coletar o m√°ximo de dados poss√≠vel, sem transpar√™ncia.</label>
                            <label class="resposta-opcao"><input type="radio" name="q28" value="errada"> C) N√£o √© relevante, pois os dados s√£o an√¥nimos.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(28)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="29">
                            <h3>9. O que a I.A. Generativa pode trazer para a produ√ß√£o de conte√∫do?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q29" value="correta"> A) Cria√ß√£o de textos e imagens em larga escala, otimizando o processo.</label>
                            <label class="resposta-opcao"><input type="radio" name="q29" value="errada"> B) Apenas a substitui√ß√£o de redatores.</label>
                            <label class="resposta-opcao"><input type="radio" name="q29" value="errada"> C) Maior custo de produ√ß√£o.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(29)">Verificar Resposta</button>
                        </div>

                        <div class="questao" data-questao="30">
                            <h3>10. Por que a otimiza√ß√£o de campanhas deve vir antes da escalabilidade?</h3>
                            <label class="resposta-opcao"><input type="radio" name="q30" value="correta"> A) Para garantir que o aumento de investimento n√£o desperdice recursos em algo ineficiente.</label>
                            <label class="resposta-opcao"><input type="radio" name="q30" value="errada"> B) Porque a escalabilidade √© mais simples que a otimiza√ß√£o.</label>
                            <label class="resposta-opcao"><input type="radio" name="q30" value="errada"> C) N√£o h√° diferen√ßa na ordem dos processos.</label>
                            <button class="btn-verificar-resposta" onclick="verificarResposta(30)">Verificar Resposta</button>
                        </div>
                        
                        <button id="btnFinalizarTesteM3" class="btn" onclick="finalizarTeste(3, 30, 24)" disabled>Finalizar Teste</button>
                    </div>
                `
            }
        };

        const totalAulas = Object.keys(aulas).length;

        // **********************************************
        // 2. GERENCIAMENTO DE ESTADO (LOCALSTORAGE) E VARI√ÅVEIS GLOBAIS
        // **********************************************
        let estado = {
            nome: '',
            email: '', 
            // NOVO: Adicionado CPF e Matr√≠cula
            cpf: '',
            matricula: '',
            // Fim NOVO
            aulaAtual: 1,
            aulasConcluidas: {}, // {1: true, 2: false}
            notaM1: 0, notaM2: 0, notaM3: 0,
            testeM1Finalizado: false, testeM2Finalizado: false, testeM3Finalizado: false,
            inscricaoFeita: false, 
            respostasMarcadas: {} // {1: 'correta', 2: 'errada'}
        };

        function salvarEstado() {
            localStorage.setItem('cursoEstado', JSON.stringify(estado));
        }

        function carregarEstado() {
            const estadoSalvo = localStorage.getItem('cursoEstado');
            if (estadoSalvo) {
                // Tenta carregar o estado salvo, mantendo as propriedades padr√£o caso n√£o existam no salvo
                estado = { ...estado, ...JSON.parse(estadoSalvo) };
            }
            
            // Verifica o Dark Mode
            if (localStorage.getItem('darkMode') === 'enabled') {
                 document.body.classList.add('dark-mode');
                 document.getElementById('darkModeToggle').textContent = 'Modo Diurno ‚òÄÔ∏è';
            }

            // MODIFICADO: Sempre que houver um e-mail salvo (ap√≥s a inscri√ß√£o), vai para a tela de login.
            if (estado.email && estado.nome) {
                voltarParaAcesso(true); // Argumento 'true' para n√£o salvar estado desnecessariamente
            } else {
                // Se n√£o tiver, mostra a tela de acesso/inscri√ß√£o (primeira vez)
                document.getElementById('telaInscricao').style.display = 'block';
                document.getElementById('sidebar').style.display = 'none';
                document.getElementById('aulaConteudo').style.display = 'none';
                document.getElementById('navBotoes').style.display = 'none';
                document.getElementById('btnCertInscricao').style.display = 'none';
                document.getElementById('btnVoltarAcesso').style.display = 'none'; // Esconde o bot√£o de voltar quando na tela inicial
                
                document.getElementById('mensagemInscricao').textContent = 'Preencha seus dados para salvar seu progresso e acessar o certificado de inscri√ß√£o.';
                document.getElementById('btnAcessarCurso').textContent = 'Me Inscrever e Come√ßar o Curso';
            }
        }
        
        // MODIFICADO: Fun√ß√£o irParaCurso n√£o recebe mais o argumento 'continuar', e o pop-up autom√°tico foi removido.
        function irParaCurso() {
             document.getElementById('telaInscricao').style.display = 'none';
             document.getElementById('sidebar').style.display = 'block';
             document.getElementById('aulaConteudo').style.display = 'block';
             document.getElementById('navBotoes').style.display = 'flex'; // Garante que a navega√ß√£o apare√ßa
             document.getElementById('btnCertInscricao').style.display = 'block'; 
             document.getElementById('btnVoltarAcesso').style.display = 'block'; // Mostra bot√£o de voltar/acesso
             
             montarSidebar();
             mostrarAula(estado.aulaAtual);
             salvarEstado(); // Salva a transi√ß√£o para a tela de curso
        }

        // MODIFICADO: Fun√ß√£o para simular o "Voltar para Acesso" que agora √© o "Login"
        function voltarParaAcesso(isReload = false) {
            if (!isReload) { // N√£o salva se estiver sendo chamado ao recarregar a p√°gina
                salvarEstado(); 
            }
            
            // Oculta o conte√∫do do curso
            document.getElementById('sidebar').style.display = 'none';
            document.getElementById('aulaConteudo').style.display = 'none';
            document.getElementById('navBotoes').style.display = 'none';
            document.getElementById('btnCertInscricao').style.display = 'none';
            document.getElementById('btnVoltarAcesso').style.display = 'none';

            // Mostra a tela de acesso/inscri√ß√£o
            document.getElementById('telaInscricao').style.display = 'block';

            // Atualiza o texto na tela de acesso/inscri√ß√£o para "Continuar"
            document.getElementById('mensagemInscricao').textContent = 'Use seu Nome, E-mail e CPF para continuar seu progresso.';
            document.getElementById('btnAcessarCurso').textContent = 'Continuar o Curso';

            // Pr√©-preenche os campos (simula o "lembrar" o login)
            document.getElementById('alunoNome').value = estado.nome || '';
            document.getElementById('alunoEmail').value = estado.email || '';
            document.getElementById('alunoCPF').value = estado.cpf || '';
        }
        
        // NOVO: Fun√ß√£o para gerar um n√∫mero de matr√≠cula simples
        function gerarNumeroMatricula() {
            // Gera um n√∫mero no formato YYYYMMDDxxxxxx
            const data = new Date();
            const ano = data.getFullYear().toString();
            const mes = (data.getMonth() + 1).toString().padStart(2, '0');
            const dia = data.getDate().toString().padStart(2, '0');
            const aleatorio = Math.floor(100000 + Math.random() * 900000).toString(); // 6 d√≠gitos
            return `MD-${ano}${mes}${dia}-${aleatorio}`;
        }


        // **********************************************
        // 3. L√ìGICA DE INSCRI√á√ÉO E POP-UP (AJUSTADO)
        // **********************************************
        function iniciarOuAcessar(event) {
            event.preventDefault();
            const nomeDigitado = document.getElementById('alunoNome').value.trim();
            const emailDigitado = document.getElementById('alunoEmail').value.trim();
            const cpfDigitado = document.getElementById('alunoCPF').value.trim(); 
            
            // Simula uma tentativa de login/inscri√ß√£o
            if (nomeDigitado && emailDigitado && cpfDigitado) {
                
                let isNewInscription = false;
                
                // Se a inscri√ß√£o n√£o foi feita, √© a primeira vez (novo aluno)
                if (!estado.inscricaoFeita) {
                    estado.matricula = gerarNumeroMatricula(); // Gera matr√≠cula na primeira inscri√ß√£o
                    estado.inscricaoFeita = true;
                    isNewInscription = true; // Flag para a primeira inscri√ß√£o
                }
                
                // Salva os dados (seja novo ou login)
                estado.nome = nomeDigitado;
                estado.email = emailDigitado;
                estado.cpf = cpfDigitado;

                salvarEstado();

                // 1. Vai para o curso
                irParaCurso(); 
                
                // 2. SE FOR A PRIMEIRA INSCRI√á√ÉO: exibe o certificado de inscri√ß√£o (o pop-up)
                if (isNewInscription) {
                    mostrarCertificadoInscricao(); 
                }

            } else {
                 alert("Por favor, preencha Nome Completo, E-mail e CPF.");
            }
        }

        function mostrarCertificadoInscricao() {
            if (!estado.inscricaoFeita) {
                 alert("Voc√™ precisa se inscrever primeiro!");
                 return;
            }
            const popup = document.getElementById('certificadoInscricaoPopup');
            document.getElementById('certificadoInscricaoNome').textContent = estado.nome;
            document.getElementById('certificadoInscricaoEmail').textContent = estado.email;
            document.getElementById('certificadoInscricaoCPF').textContent = estado.cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4'); // Formata CPF
            document.getElementById('certificadoInscricaoMatricula').textContent = estado.matricula;
            document.getElementById('certificadoInscricaoData').textContent = new Date().toLocaleDateString('pt-BR');
            popup.style.display = 'flex'; // Usar 'flex' para manter a centraliza√ß√£o do CSS
        }
        
        function fecharCertificadoInscricao() {
            document.getElementById('certificadoInscricaoPopup').style.display = 'none';
        }

        // **********************************************
        // 4. NAVEGA√á√ÉO E SIDEBAR
        // **********************************************
        function montarSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.innerHTML = ''; // Limpa a sidebar

            let currentModulo = 0;
            for (const id in aulas) {
                const aula = aulas[id];

                // Adiciona t√≠tulo do m√≥dulo, se for o in√≠cio de um novo m√≥dulo
                if (aula.modulo !== currentModulo) {
                    const moduloDiv = document.createElement('div');
                    moduloDiv.className = `modulo-title modulo-${aula.modulo}`;
                    moduloDiv.textContent = `M√ìDULO ${aula.modulo}: ${aula.modulo === 1 ? 'Fundamentos (B√°sico)' : aula.modulo === 2 ? 'Intermedi√°rio' : 'Avan√ßado'}`;
                    sidebar.appendChild(moduloDiv);
                    currentModulo = aula.modulo;
                }

                const item = document.createElement('div');
                item.className = 'menu-item';
                item.setAttribute('data-aula', id);
                item.setAttribute('data-modulo', aula.modulo);
                
                // Marca como conclu√≠da
                if (estado.aulasConcluidas[id] && !aula.isTeste) {
                    item.classList.add('concluida');
                }

                // Adiciona o indicador de status do teste
                const tituloSpan = document.createElement('span');
                tituloSpan.textContent = aula.titulo;
                item.appendChild(tituloSpan);

                if (aula.isTeste) {
                    const status = document.createElement('span');
                    const nota = estado[`notaM${aula.modulo}`];
                    
                    if (estado[`testeM${aula.modulo}Finalizado`]) {
                         status.className = 'status-badge ' + (nota >= 60 ? 'aprovado' : 'reprovado');
                         status.textContent = nota >= 60 ? `Aprovado (${nota}%)` : `Reprovado (${nota}%)`;
                         if (nota >= 60) item.classList.add('concluida'); // Marca teste como conclu√≠do/aprovado
                    } else {
                         status.className = 'status-badge pendente';
                         status.textContent = 'Pendente';
                    }
                    item.appendChild(status);
                }

                item.setAttribute('onclick', `mostrarAula(${id})`);
                sidebar.appendChild(item);
            }
        }

        function mostrarAula(id) {
            id = parseInt(id);

            // Atualiza o estado
            estado.aulaAtual = id;
            salvarEstado();

            // Atualiza o conte√∫do
            const aula = aulas[id];
            const aulaContent = document.getElementById('aulaConteudo');
            aulaContent.innerHTML = aula.conteudo;

            // Marca o item ativo na sidebar
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            const activeItem = document.querySelector(`.menu-item[data-aula="${id}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
                activeItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // Atualiza bot√µes de navega√ß√£o
            const navBotoes = document.getElementById('navBotoes');
            navBotoes.style.display = 'flex';
            
            const btnAnterior = document.getElementById('btnAnterior');
            const btnProximo = document.getElementById('btnProximo');
            
            btnAnterior.disabled = (id === 1);
            btnProximo.style.display = 'block';

            if (id === totalAulas) {
                btnProximo.textContent = 'Fim do Curso';
                btnProximo.disabled = true;
                // Se for a √∫ltima aula e o teste do m√≥dulo 3 n√£o estiver finalizado, habilita o bot√£o de certificado
                if(aula.isTeste && !estado.testeM3Finalizado) {
                    document.getElementById('btnFinalizarTesteM3').textContent = 'Finalizar Teste e Emitir Certificado';
                }
            } else if (aula.isTeste && !estado[`testeM${aula.modulo}Finalizado`]) {
                btnProximo.style.display = 'none'; // N√£o mostra pr√≥ximo bot√£o se o teste n√£o estiver finalizado
            } else {
                btnProximo.textContent = 'Pr√≥xima Aula ‚Üí';
                btnProximo.disabled = false;
            }

            // Se for aula normal, marca como conclu√≠da (automaticamente ao visualizar)
            if (!aula.isTeste) {
                estado.aulasConcluidas[id] = true;
                if(activeItem) activeItem.classList.add('concluida');
                salvarEstado();
            }

            // L√≥gica para carregar respostas do teste, se for o caso
            if (aula.isTeste) {
                carregarRespostasTeste(id);
                // Bloqueia o teste se j√° finalizado
                if (estado[`testeM${aula.modulo}Finalizado`]) {
                    desabilitarTeste(aula.modulo);
                }
            }
        }
        
        function irParaAulaAnterior() {
            const aulaAnteriorId = estado.aulaAtual - 1;
            if (aulaAnteriorId >= 1) {
                mostrarAula(aulaAnteriorId);
            }
        }

        function irParaProximaAula() {
            const proximaAulaId = estado.aulaAtual + 1;
            if (proximaAulaId <= totalAulas) {
                mostrarAula(proximaAulaId);
            }
        }

        // **********************************************
        // 5. L√ìGICA DO TESTE (RESTURADO)
        // **********************************************
        function carregarRespostasTeste(aulaId) {
            const modulo = aulas[aulaId].modulo;
            const testeBox = document.getElementById(`testeM${modulo}`);
            
            // Carrega respostas marcadas e verifica se o bot√£o de finalizar deve ser habilitado
            let perguntasRespondidas = 0;
            const totalPerguntas = 10;
            for (let i = 1; i <= totalPerguntas; i++) {
                const questaoId = (modulo - 1) * 10 + i;
                const respostaSalva = estado.respostasMarcadas[questaoId];
                if (respostaSalva) {
                    perguntasRespondidas++;
                    const input = testeBox.querySelector(`input[name="q${questaoId}"][value="${respostaSalva}"]`);
                    if (input) input.checked = true;
                }
            }

            const btnFinalizar = document.getElementById(`btnFinalizarTesteM${modulo}`);
            if (btnFinalizar) {
                btnFinalizar.disabled = (perguntasRespondidas !== totalPerguntas);
            }
        }

        function verificarResposta(questaoId) {
            const questao = document.querySelector(`.questao[data-questao="${questaoId}"]`);
            const modulo = aulas[estado.aulaAtual].modulo;
            
            // Limpa feedback anterior
            questao.querySelectorAll('.resposta-opcao').forEach(label => {
                label.classList.remove('correta', 'incorreta');
            });
            
            const selected = questao.querySelector(`input[name="q${questaoId}"]:checked`);
            
            if (selected) {
                const valor = selected.value;
                estado.respostasMarcadas[questaoId] = valor;
                salvarEstado();
                
                // Simplesmente marca a op√ß√£o selecionada no estado (sem revelar a resposta na hora)
                // O feedback visual s√≥ √© dado ap√≥s finalizar o teste.

                let perguntasRespondidas = 0;
                for (let i = (modulo - 1) * 10 + 1; i <= modulo * 10; i++) {
                    if (estado.respostasMarcadas[i]) {
                        perguntasRespondidas++;
                    }
                }

                const btnFinalizar = document.getElementById(`btnFinalizarTesteM${modulo}`);
                if (btnFinalizar) {
                    btnFinalizar.disabled = (perguntasRespondidas !== 10);
                }
            }
        }

        function finalizarTeste(modulo, totalPerguntas, acertosMinimos) {
            if (estado[`testeM${modulo}Finalizado`]) {
                if (modulo === 3 && estado.notaM3 >= 60) {
                     mostrarCertificadoConclusao();
                } else if (modulo < 3 && estado.notaM3 >= 60) {
                     irParaProximaAula();
                }
                return;
            }

            let acertos = 0;
            const notaMaxima = modulo * 10;
            const acertosCorretos = {}; // Para refer√™ncia futura

            const respostasCorretas = {
                1: 'correta', 2: 'correta', 3: 'correta', 4: 'correta', 5: 'correta', 
                6: 'correta', 7: 'correta', 8: 'correta', 9: 'correta', 10: 'correta',
                11: 'correta', 12: 'correta', 13: 'correta', 14: 'correta', 15: 'correta', 
                16: 'correta', 17: 'correta', 18: 'correta', 19: 'correta', 20: 'correta',
                21: 'correta', 22: 'correta', 23: 'correta', 24: 'correta', 25: 'correta',
                26: 'correta', 27: 'correta', 28: 'correta', 29: 'correta', 30: 'correta'
            };

            for (let i = 1; i <= totalPerguntas; i++) {
                const questaoId = (modulo - 1) * 10 + i;
                const respostaUsuario = estado.respostasMarcadas[questaoId];
                const respostaCerta = respostasCorretas[questaoId];
                
                if (respostaUsuario === respostaCerta) {
                    acertos++;
                }

                // Aplica feedback visual
                const questao = document.querySelector(`.questao[data-questao="${questaoId}"]`);
                if (questao) {
                    questao.querySelector(`input[value="${respostaCerta}"]`).closest('.resposta-opcao').classList.add('correta');
                    if (respostaUsuario && respostaUsuario !== respostaCerta) {
                        const inputIncorreto = questao.querySelector(`input[value="${respostaUsuario}"]`);
                        if(inputIncorreto) {
                            inputIncorreto.closest('.resposta-opcao').classList.add('incorreta');
                        }
                    }
                }
            }

            const nota = Math.round((acertos / totalPerguntas) * 100);
            estado[`notaM${modulo}`] = nota;
            estado[`testeM${modulo}Finalizado`] = true;
            estado.aulasConcluidas[estado.aulaAtual] = (nota >= 60); // Marca aula (teste) como conclu√≠da se aprovado

            salvarEstado();
            montarSidebar();
            desabilitarTeste(modulo);

            let mensagem = `Voc√™ acertou ${acertos} de ${totalPerguntas} perguntas (${nota}%).`;
            if (nota >= 60) {
                mensagem += '\nParab√©ns, voc√™ foi APROVADO(A) neste m√≥dulo!';
            } else {
                mensagem += '\nInfelizmente voc√™ REPROVOU. Tente novamente!';
            }
            alert(mensagem);

            if (modulo === 3 && nota >= 60) {
                 mostrarCertificadoConclusao();
            } else if (modulo < 3 && nota >= 60) {
                irParaProximaAula(); // Passa para o pr√≥ximo m√≥dulo
            }
        }

        function desabilitarTeste(modulo) {
            const testeBox = document.getElementById(`testeM${modulo}`);
            if (testeBox) {
                testeBox.querySelectorAll('input[type="radio"], .btn-verificar-resposta').forEach(el => {
                    el.disabled = true;
                });
                const btnFinalizar = document.getElementById(`btnFinalizarTesteM${modulo}`);
                btnFinalizar.textContent = 'Teste Finalizado';
                btnFinalizar.disabled = false; // Permite clicar para ir para o pr√≥ximo ou certificado
                btnFinalizar.onclick = (modulo === 3 && estado.notaM3 >= 60) ? mostrarCertificadoConclusao : (modulo < 3 && estado[`notaM${modulo}`] >= 60) ? irParaProximaAula : () => {}; // Adicionado handler para reprovados/aprovados em m√≥dulos < 3
                if (modulo === 3 && estado.notaM3 >= 60) {
                    btnFinalizar.textContent = 'Emitir Certificado de Conclus√£o';
                }
            }
        }

        // **********************************************
        // 6. CERTIFICADO DE CONCLUS√ÉO (AJUSTADO)
        // **********************************************
        function formatarData(data) {
            return new Date(data).toLocaleDateString('pt-BR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }
        
        // NOVO: Fun√ß√£o para formatar o CPF
        function formatarCPF(cpf) {
             // Aceita apenas d√≠gitos e aplica a m√°scara 000.000.000-00
             cpf = cpf.replace(/\D/g, ''); 
             return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
        }

        function calcularNotaGeral() {
             // Soma as notas dos testes
            const notas = [estado.notaM1, estado.notaM2, estado.notaM3];
            const notasValidas = notas.filter(n => typeof n === 'number' && n >= 0);
            
            if (notasValidas.length === 0) return 0;
            
            const media = notasValidas.reduce((a, b) => a + b, 0) / notasValidas.length;
            return Math.round(media);
        }

        function mostrarCertificadoConclusao() {
            if (!estado.testeM3Finalizado || estado.notaM3 < 60) {
                alert('Voc√™ precisa ser aprovado no Teste do M√≥dulo 3 para emitir o certificado de conclus√£o.');
                return;
            }

            const mediaFinal = calcularNotaGeral();
            const dataConclusao = new Date().toLocaleDateString('pt-BR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            document.getElementById('certificadoConclusaoNome').textContent = estado.nome;
            document.getElementById('certificadoConclusaoEmail').textContent = estado.email;
            document.getElementById('certificadoConclusaoCPF').textContent = formatarCPF(estado.cpf); // NOVO
            document.getElementById('certificadoConclusaoMatricula').textContent = estado.matricula; // NOVO
            document.getElementById('certificadoConclusaoData').textContent = `S√£o Paulo, ${dataConclusao}`;
            document.getElementById('percentualAprovacao').innerHTML = `aprova√ß√£o final com **${mediaFinal}%** de acerto.`;

            document.getElementById('certificadoConclusaoPopup').style.display = 'flex';
        }

        function fecharCertificadoConclusao() {
            document.getElementById('certificadoConclusaoPopup').style.display = 'none';
        }

        function downloadCertificadoPDF() {
            const popup = document.getElementById('certificadoConclusaoPopup').querySelector('.certificado-conclusao');
            
            // L√≥gica de impress√£o (usando o CSS @media print para formatar)
            
            const closeBtn = popup.querySelector('.close-btn');
            const downloadBtn = document.getElementById('btnDownloadPDF');
            const nomeOriginal = document.title;
            
            // Esconde bot√µes antes de imprimir
            if (closeBtn) closeBtn.style.display = 'none';
            if (downloadBtn) downloadBtn.style.display = 'none';
            
            document.title = "Certificado - " + (estado.nome || 'Aluno'); 
            
            window.print();

            // Restaura bot√µes e t√≠tulo
            if (closeBtn) closeBtn.style.display = 'block'; 
            if (downloadBtn) downloadBtn.style.display = 'block'; 
            document.title = nomeOriginal; 
        }

        // MODO NOTURNO
        function toggleDarkMode() {
             document.body.classList.toggle('dark-mode');
             const isDarkMode = document.body.classList.contains('dark-mode');
             const button = document.getElementById('darkModeToggle');
             if (isDarkMode) {
                 button.textContent = 'Modo Diurno ‚òÄÔ∏è';
                 localStorage.setItem('darkMode', 'enabled');
             } else {
                 button.textContent = 'Modo Noturno üåô';
                 localStorage.setItem('darkMode', 'disabled');
             }
        }
        
        // **********************************************
        // 7. LISTENERS GERAIS (SALVAMENTO AUTOM√ÅTICO)
        // **********************************************
        // Garante que o estado seja salvo quando o usu√°rio fechar ou recarregar a p√°gina
        window.addEventListener('beforeunload', salvarEstado);

        // CARREGA AO INICIAR
        document.addEventListener('DOMContentLoaded', carregarEstado);
    </script>
</body>
</html>